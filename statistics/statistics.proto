syntax = "proto3";

import "transaction.proto";
import "bot_comm.proto";
import "google/protobuf/timestamp.proto";

service StatisticsServiceCommunicator{
  rpc GetAllUserTransactions(BotsDataRequest) returns (Transactions) {};
  rpc GetBotTransactions(BotRequest) returns (Transactions) {};

  rpc GetBotStatistics(BotRequest) returns(BotStatistics) {};
  rpc GetBotsOverallStatistics(BotsDataRequest) returns(OverallStatistics){};

  rpc GetUserAssets(BotsDataRequest) returns (UserAssets){};
}

message BotStatistics{
  uint64 botId = 1;
  double profit = 2; // someday money-message, not double
  repeated Asset assets = 3; //repeated works like a list in python
  google.protobuf.Timestamp uptime = 4; // how long it lives from creation time
  google.protobuf.Timestamp lastTradeTime = 5;
}

message Asset{
  string pair = 1;
  double amount = 2;
  double buyRate = 3; //kurs po jakim kupiono
  double currentRate = 4;
  double buyValue = 5; // buyRate * amount
  double currentValue = 6; // currentRate * amount
  float profit = 7;
}

message BotAsset{
  uint64 botId = 1;
  repeated Asset assets = 2;
}

message UserAssets{
  repeated BotAsset assets = 1;
}

message OverallStatistics{
  double totalProfit = 1;
  double totalBalance = 2;
  google.protobuf.Timestamp lastTradeTime = 3;
  string bestBotName = 4;
  string worstBotName = 5;
  int32 realisedTrades = 6;
  int32 allTrades = 7;
}